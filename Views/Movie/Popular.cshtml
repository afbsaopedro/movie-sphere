@model MovieSphere.Dto.MoviesResponse

@{
    var nextPage = Model.Page + 1;
    var previousPage = Model.Page - 1;
    ViewData["Title"] = "Movies";
}

<form asp-action="MovieSearch" method="get">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="form-group">
        <label for="query" class="control-label"></label>
        <input name="query" class="form-control" />
    </div>
    <div class="form-group">
        <input type="submit" value="Search" class="btn btn-primary" />
    </div>
</form>

<h1>Popular right now</h1>



<div class="container mt-4">
    <div class="row">

        @foreach (var item in Model.Movies)
        {
            var source = "https://www.themoviedb.org/t/p/w300_and_h450_bestv2" + item.PosterImage;
            <div class="col-md-6 mb-4">
                <div class="card">

                    <img src="@source" alt="Movie Poster">

                    <div class="card-body">

                        <h5 class="card-title">@item.Title</h5>


                        <p class="card-text">@item.Overview</p>


                        <p class="card-text"><small class="text-muted">@item.ReleaseDate</small></p>

                        <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-primary">Details</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@if (previousPage <= 0)
{
    <a asp-route-page="@nextPage">Next Page</a>
}
else
{
    <a asp-route-page="@previousPage">Previous Page</a>
    <a asp-route-page="@nextPage">Next Page</a>
}






